--- # Please provide all the properties. 

artifact:  
  name: "dp-nestjs-template"
  type: NODEJS   
  
  version: 1.0.0-SNAPSHOT 
                    

# Application Properties which will be taken to generate next Build Package artifacts:
# - NodeJs MicroServices
# - NodeJs Core Library

  # Additional Environment Variables which will be used into a Docker context.
  envVars: "HOME=."              

  # Properties used to generate the Build Artifact through the steps: build, lint, test, package.
  docker:
    sourceImage: node:carbon # The default is carbon (8) to ensure compatibility with AWS Lambda, Kubernetes apps should override this to LTS (10)
    targetImage: node:library
    # For the actual image to be deployed
    sourceTag: "image_name:tag_name:version.1.0.0-SNAPSHOT"
    targetTag: "image_name:tag_name:version.1.0.0-SNAPSHOT"
    context: "."    
    # --------------------------------------------------------------------------------
    # TODO. Remove and automate the Docker Build image in the dp-tools-image 
    # due to is UNWANTED build the Docker image each time the Build Job is triggered.
    # --------------------------------------------------------------------------------
    target:
      dockerfile: Dockerfile.jenkins
      context: "."

  nexus:
    repositoryTarget: nestjs-tmp
    repositoryApp: fake-repo
    repositoryGroupId: org.gm.fakes
    repositoryType: hosted           

  # DataStores configuration indicates where the build package artifact should be stored through the CI/CD execution.    
  dataStores:
    s3: my-dev-app-bucket
    pgsql: fake-data-store
    
  security:
    exclusions: "/node_modules"

  repository:
    repositoryApp: dp-account-management-serverless.zip
    repositoryGroupId: org.gm.ms
    repositoryType: zip
    repositoryRepo: dp-account-management-serverless
    
 # QC. Test Suites Configuration. 

  testing:
    repository: git@github.com:greatmindsorg/dp-account-management-serverless-automation.git
    branch: develop
    path: build/release/dp-account-management-serverless.zip
    regression: RegressionSuite
    smoke: SmokeSuite
    
  notifications: 
    emailRecipients: support@greatminds.org
    slackChannel: tech-dp-general



  
