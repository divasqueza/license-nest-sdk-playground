---
artifact:
  type: K8S
  docker:
    build:
      image: node:lts


--- # Application Properties which will be taken to generate the Build Package artifact -only- for:
# - NodeJs MicroServices
# - NodeJs Core Library
artifact:
  artifactId: "dp-nestjs-template"
  deploymentType: "K8S"

  # Additional Environment Variables which will be used into a Docker context.
  environmentVariables: "HOME=."

  # Use for the build stages (install, build, lint, etc)
  docker:
    image: node:carbon # The default is carbon (8) to ensure compatibility with AWS Lambda, Kubernetes apps should override this to LTS (10)
    # For the actual image to be deployed
    tag: "image_name:tag_name:version.1.0.0-SNAPSHOT"

    # --------------------------------------------------------------------------------
    # TODO. Remove and automate the Docker Build image in the dp-tools-image 
    # due to is UNWANTED build the Docker image each time the Build Job is triggered.
    # --------------------------------------------------------------------------------
    target:
      dockerfile: Dockerfile.jenkins
      context: "."

  # DataStores configuration indicates where the build package artifact should be stored through the CI/CD execution.    
  dataStores:
    s3: "my-dev-app-bucket",
    pgsql: "fake-data-store"

  # Microservices endpoints per environment which will be called from Test Suites.
  appUrl: "nodejs-template"

  # Testing Properties
  testing:
    suiteTestRepo: git@github.com:greatmindsorg/dp-nestjs-automation.git
    suiteTestSmokeName: SmokeSuite
    suiteTestRegressionName: RegressionSuite
    suiteTestBranch: develop
    filePath: build/release/nestjs-template.zip
    repositoryApp: nestjs-template.zip
    repositoryGroupId: org.gm.ms
    repositoryType: zip
    repositoryRepo: nestjs-template-dev
    emailRecipients: support@greatminds.org



  
